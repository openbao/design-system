{"version":3,"file":"index.js","sources":["../../../../src/components/hds/side-nav/index.hbs","../../../../src/components/hds/side-nav/index.js"],"sourcesContent":["import { precompileTemplate } from \"@ember/template-compilation\";\nexport default precompileTemplate(\"{{!\\n  Copyright (c) HashiCorp, Inc.\\n  SPDX-License-Identifier: MPL-2.0\\n}}\\n\\n<Hds::SideNav::Base\\n  class={{this.classNames}}\\n  ...attributes\\n  {{on \\\"transitionstart\\\" (fn this.setTransition \\\"start\\\")}}\\n  {{on \\\"transitionend\\\" (fn this.setTransition \\\"end\\\")}}\\n  {{focus-trap isActive=this.shouldTrapFocus}}\\n>\\n  <:root>\\n    {{#if this.hasA11yRefocus}}\\n      <NavigationNarrator\\n        @routeChangeValidator={{@a11yRefocusRouteChangeValidator}}\\n        @skipTo=\\\"#{{@a11yRefocusSkipTo}}\\\"\\n        @skipText={{@a11yRefocusSkipText}}\\n        @navigationText={{@a11yRefocusNavigationText}}\\n      />\\n    {{/if}}\\n    {{#if this.showToggleButton}}\\n      {{! template-lint-disable no-invalid-interactive}}\\n      <div class=\\\"hds-side-nav__overlay\\\" {{on \\\"click\\\" this.toggleMinimizedStatus}} />\\n      {{! template-lint-enable no-invalid-interactive}}\\n      <Hds::SideNav::ToggleButton\\n        aria-label={{this.ariaLabel}}\\n        @icon={{if this.isMinimized \\\"chevrons-right\\\" \\\"chevrons-left\\\"}}\\n        {{on \\\"click\\\" this.toggleMinimizedStatus}}\\n      />\\n    {{/if}}\\n  </:root>\\n  <:header as |Header|>\\n    {{yield (hash Header=Header isMinimized=this.isMinimized) to=\\\"header\\\"}}\\n  </:header>\\n  <:body as |Body|>\\n    {{yield (hash Body=Body isMinimized=this.isMinimized) to=\\\"body\\\"}}\\n  </:body>\\n  <:footer as |Footer|>\\n    {{yield (hash Footer=Footer isMinimized=this.isMinimized) to=\\\"footer\\\"}}\\n  </:footer>\\n</Hds::SideNav::Base>\")","/**\n * Copyright (c) HashiCorp, Inc.\n * SPDX-License-Identifier: MPL-2.0\n */\n\nimport Component from '@glimmer/component';\nimport { tracked } from '@glimmer/tracking';\nimport { action } from '@ember/object';\nimport { assert } from '@ember/debug';\nimport { registerDestructor } from '@ember/destroyable';\n\nexport default class HdsSideNavComponent extends Component {\n  @tracked isResponsive = this.args.isResponsive ?? true; // controls if the component reacts to viewport changes\n  @tracked isMinimized = this.args.isMinimized ?? false; // sets the default state on 'desktop' viewports\n  @tracked isCollapsible = this.args.isCollapsible ?? false; // controls if users can collapse the sidenav on 'desktop' viewports\n  @tracked isAnimating = false;\n  @tracked isDesktop = true;\n  hasA11yRefocus = this.args.hasA11yRefocus ?? true;\n\n  desktopMQVal = getComputedStyle(document.documentElement).getPropertyValue(\n    '--hds-app-desktop-breakpoint'\n  );\n\n  constructor() {\n    super(...arguments);\n    this.desktopMQ = window.matchMedia(`(min-width:${this.desktopMQVal})`);\n    this.addEventListeners();\n    registerDestructor(this, () => {\n      this.removeEventListeners();\n    });\n\n    if (this.args.hasA11yRefocus) {\n      assert(\n        '@a11yRefocusSkipTo for NavigatorNarrator (a11y-refocus) in \"Hds::SideNav\" must have a valid value',\n        this.args.a11yRefocusSkipTo !== undefined\n      );\n    }\n  }\n\n  addEventListeners() {\n    document.addEventListener('keydown', this.escapePress, true);\n    this.desktopMQ.addEventListener('change', this.updateDesktopVariable, true);\n    // if not instantiated as minimized via arguments\n    if (!this.args.isMinimized) {\n      // set initial state based on viewport\n      this.updateDesktopVariable({ matches: this.desktopMQ.matches });\n    }\n  }\n\n  removeEventListeners() {\n    document.removeEventListener('keydown', this.escapePress, true);\n    this.desktopMQ.removeEventListener(\n      'change',\n      this.updateDesktopVariable,\n      true\n    );\n  }\n\n  get shouldTrapFocus() {\n    return this.isResponsive && !this.isDesktop && !this.isMinimized;\n  }\n\n  get showToggleButton() {\n    return (this.isResponsive && !this.isDesktop) || this.isCollapsible;\n  }\n\n  /**\n   * @param ariaLabel\n   * @type {string}\n   * @default 'close menu'\n   */\n  get ariaLabel() {\n    if (this.isMinimized) {\n      return this.args.ariaLabel ?? 'Open menu';\n    }\n    return this.args.ariaLabel ?? 'Close menu';\n  }\n\n  get classNames() {\n    let classes = []; // `hds-side-nav` is already set by the \"Hds::SideNav::Base\" component\n\n    // add specific class names for the different possible states\n    if (this.isResponsive) {\n      classes.push('hds-side-nav--is-responsive');\n    }\n    if (!this.isDesktop && this.isResponsive) {\n      classes.push('hds-side-nav--is-mobile');\n    } else {\n      classes.push('hds-side-nav--is-desktop');\n    }\n    if (this.isMinimized && this.isResponsive) {\n      classes.push('hds-side-nav--is-minimized');\n    } else {\n      classes.push('hds-side-nav--is-not-minimized');\n    }\n    if (this.isAnimating) {\n      classes.push('hds-side-nav--is-animating');\n    }\n\n    return classes.join(' ');\n  }\n\n  @action\n  escapePress(event) {\n    if (event.key === 'Escape' && !this.isMinimized && !this.isDesktop) {\n      this.isMinimized = true;\n    }\n  }\n\n  @action\n  toggleMinimizedStatus() {\n    this.isMinimized = !this.isMinimized;\n\n    let { onToggleMinimizedStatus } = this.args;\n\n    if (typeof onToggleMinimizedStatus === 'function') {\n      onToggleMinimizedStatus(this.isMinimized);\n    }\n  }\n\n  @action\n  setTransition(phase, event) {\n    // we only want to respond to `width` animation/transitions\n    if (event.propertyName !== 'width') {\n      return;\n    }\n    if (phase === 'start') {\n      this.isAnimating = true;\n    } else {\n      this.isAnimating = false;\n    }\n  }\n\n  @action\n  updateDesktopVariable(event) {\n    this.isDesktop = event.matches;\n\n    // automatically minimize on narrow viewports (when not in desktop mode)\n    this.isMinimized = !this.isDesktop;\n\n    let { onDesktopViewportChange } = this.args;\n\n    if (typeof onDesktopViewportChange === 'function') {\n      onDesktopViewportChange(this.isDesktop);\n    }\n  }\n}\n"],"names":["HdsSideNavComponent","_class","Component","constructor","arguments","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_defineProperty","args","hasA11yRefocus","getComputedStyle","document","documentElement","getPropertyValue","desktopMQ","window","matchMedia","desktopMQVal","addEventListeners","registerDestructor","removeEventListeners","assert","a11yRefocusSkipTo","undefined","addEventListener","escapePress","updateDesktopVariable","isMinimized","matches","removeEventListener","shouldTrapFocus","isResponsive","isDesktop","showToggleButton","isCollapsible","ariaLabel","classNames","classes","push","isAnimating","join","event","key","toggleMinimizedStatus","onToggleMinimizedStatus","setTransition","phase","propertyName","onDesktopViewportChange","_applyDecoratedDescriptor","prototype","tracked","configurable","enumerable","writable","initializer","action","Object","getOwnPropertyDescriptor","setComponentTemplate","TEMPLATE"],"mappings":"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"}