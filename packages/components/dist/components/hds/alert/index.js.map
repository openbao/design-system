{"version":3,"file":"index.js","sources":["../../../../src/components/hds/alert/index.hbs","../../../../src/components/hds/alert/index.js"],"sourcesContent":["import { precompileTemplate } from \"@ember/template-compilation\";\nexport default precompileTemplate(\"{{!\\n  Copyright (c) HashiCorp, Inc.\\n  SPDX-License-Identifier: MPL-2.0\\n}}\\n<div\\n  class={{this.classNames}}\\n  role={{this.role}}\\n  aria-live=\\\"polite\\\"\\n  aria-labelledby={{this.ariaLabelledBy}}\\n  {{did-insert this.didInsert}}\\n  ...attributes\\n>\\n  {{#if this.icon}}\\n    <div class=\\\"hds-alert__icon\\\">\\n      <FlightIcon @name={{this.icon}} @size={{this.iconSize}} @stretched={{true}} @isInlineBlock={{false}} />\\n    </div>\\n  {{/if}}\\n\\n  <div class=\\\"hds-alert__content\\\">\\n    <div class=\\\"hds-alert__text {{if (eq @type \\'compact\\') \\'hds-typography-body-100\\' \\'hds-typography-body-200\\'}}\\\">\\n      {{yield (hash Title=(component \\\"hds/alert/title\\\"))}}\\n      {{yield (hash Description=(component \\\"hds/alert/description\\\"))}}\\n    </div>\\n\\n    <div class=\\\"hds-alert__actions\\\">\\n      {{yield\\n        (hash\\n          Button=(component \\\"hds/button\\\" size=\\\"small\\\") Link::Standalone=(component \\\"hds/link/standalone\\\" size=\\\"small\\\")\\n        )\\n      }}\\n    </div>\\n    {{yield (hash Generic=(component \\\"hds/yield\\\"))}}\\n  </div>\\n\\n  {{#if this.onDismiss}}\\n    <Hds::DismissButton class=\\\"hds-alert__dismiss\\\" {{on \\\"click\\\" this.onDismiss}} />\\n  {{/if}}\\n</div>\")","/**\n * Copyright (c) HashiCorp, Inc.\n * SPDX-License-Identifier: MPL-2.0\n */\n\nimport Component from '@glimmer/component';\nimport { action } from '@ember/object';\nimport { assert } from '@ember/debug';\nimport { guidFor } from '@ember/object/internals';\nimport { tracked } from '@glimmer/tracking';\n\nexport const TYPES = ['page', 'inline', 'compact'];\nexport const DEFAULT_COLOR = 'neutral';\nexport const COLORS = [\n  'neutral',\n  'highlight',\n  'success',\n  'warning',\n  'critical',\n];\nexport const MAPPING_COLORS_TO_ICONS = {\n  neutral: 'info',\n  highlight: 'info',\n  success: 'check-circle',\n  warning: 'alert-triangle',\n  critical: 'alert-diamond',\n};\n\nconst CONTENT_ELEMENT_SELECTOR = '.hds-alert__content';\nconst TITLE_ELEMENT_SELECTOR = '.hds-alert__title';\nconst DESCRIPTION_ELEMENT_SELECTOR = '.hds-alert__description';\n\nexport default class HdsAlertIndexComponent extends Component {\n  @tracked role = 'alert';\n  @tracked ariaLabelledBy;\n\n  constructor() {\n    super(...arguments);\n\n    assert(\n      `@type for \"Hds::Alert\" must be one of the following: ${TYPES.join(\n        ', '\n      )}; received: ${this.args.type}`,\n      TYPES.includes(this.args.type)\n    );\n  }\n\n  /**\n   * @param color\n   * @type {enum}\n   * @default neutral\n   * @description Determines the color scheme for the alert.\n   */\n  get color() {\n    let { color = DEFAULT_COLOR } = this.args;\n\n    assert(\n      `@color for \"Hds::Alert\" must be one of the following: ${COLORS.join(\n        ', '\n      )}; received: ${color}`,\n      COLORS.includes(color)\n    );\n\n    return color;\n  }\n\n  /**\n   * @param icon\n   * @type {string}\n   * @default null\n   * @description The name of the icon to be used.\n   */\n  get icon() {\n    let { icon } = this.args;\n\n    // If `icon` isn't passed, use the pre-defined one from `color`\n    if (icon === undefined) {\n      if (this.args.type === 'compact') {\n        // for the \"compact\" type by default we use filled icons\n        return `${MAPPING_COLORS_TO_ICONS[this.color]}-fill`;\n      } else {\n        // for all the other types by default we use outlined icons\n        return MAPPING_COLORS_TO_ICONS[this.color];\n      }\n      // If `icon` is set explicitly to false, user doesn't want any icon in the alert\n    } else if (icon === false) {\n      assert(\n        `@icon for \"Hds::Alert\" with @type \"compact\" is required`,\n        this.args.type !== 'compact'\n      );\n\n      return false;\n    } else {\n      // If a name for `icon` is passed, set FlightIcon to that name\n      return icon;\n    }\n  }\n\n  /**\n   * @param onDismiss\n   * @type {function}\n   * @default () => {}\n   */\n  get onDismiss() {\n    let { onDismiss } = this.args;\n\n    if (typeof onDismiss === 'function') {\n      return onDismiss;\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * @param iconSize\n   * @type {string}\n   * @description ensures that the correct icon size is used. Automatically calculated.\n   */\n  get iconSize() {\n    if (this.args.type === 'compact') {\n      return '16';\n    } else {\n      return '24';\n    }\n  }\n\n  /**\n   * Get the class names to apply to the component.\n   * @method Alert#classNames\n   * @return {string} The \"class\" attribute to apply to the component.\n   */\n  get classNames() {\n    let classes = ['hds-alert'];\n\n    // Add a class based on the @type argument\n    classes.push(`hds-alert--type-${this.args.type}`);\n\n    // Add a class based on the @color argument\n    classes.push(`hds-alert--color-${this.color}`);\n\n    return classes.join(' ');\n  }\n\n  @action\n  didInsert(element) {\n    let actions = element.querySelectorAll(\n      `${CONTENT_ELEMENT_SELECTOR} button, ${CONTENT_ELEMENT_SELECTOR} a`\n    );\n    if (actions.length) {\n      this.role = 'alertdialog';\n    }\n\n    // `alertdialog` must have an accessible name so we use either the\n    // title or the description as label for the alert\n    let label =\n      element.querySelector(TITLE_ELEMENT_SELECTOR) ||\n      element.querySelector(DESCRIPTION_ELEMENT_SELECTOR);\n    if (label) {\n      let labelId = label.getAttribute('id') || guidFor(element);\n      label.setAttribute('id', labelId);\n      this.ariaLabelledBy = labelId;\n    }\n  }\n}\n"],"names":["TYPES","DEFAULT_COLOR","COLORS","MAPPING_COLORS_TO_ICONS","neutral","highlight","success","warning","critical","CONTENT_ELEMENT_SELECTOR","TITLE_ELEMENT_SELECTOR","DESCRIPTION_ELEMENT_SELECTOR","HdsAlertIndexComponent","_class","Component","constructor","arguments","_initializerDefineProperty","_descriptor","_descriptor2","assert","join","args","type","includes","color","icon","undefined","onDismiss","iconSize","classNames","classes","push","didInsert","element","actions","querySelectorAll","length","role","label","querySelector","labelId","getAttribute","guidFor","setAttribute","ariaLabelledBy","_applyDecoratedDescriptor","prototype","tracked","configurable","enumerable","writable","initializer","action","Object","getOwnPropertyDescriptor","setComponentTemplate","TEMPLATE"],"mappings":";;;;;;;;;AACA,eAAe,kBAAkB,CAAC,yqCAAyqC;;;ACUpsC,MAAMA,KAAK,GAAG,CAAC,MAAM,EAAE,QAAQ,EAAE,SAAS,EAAC;AAC3C,MAAMC,aAAa,GAAG,UAAS;AACzBC,MAAAA,MAAM,GAAG,CACpB,SAAS,EACT,WAAW,EACX,SAAS,EACT,SAAS,EACT,UAAU,EACX;AACM,MAAMC,uBAAuB,GAAG;AACrCC,EAAAA,OAAO,EAAE,MAAM;AACfC,EAAAA,SAAS,EAAE,MAAM;AACjBC,EAAAA,OAAO,EAAE,cAAc;AACvBC,EAAAA,OAAO,EAAE,gBAAgB;AACzBC,EAAAA,QAAQ,EAAE,eAAA;AACZ,EAAC;AAED,MAAMC,wBAAwB,GAAG,qBAAqB,CAAA;AACtD,MAAMC,sBAAsB,GAAG,mBAAmB,CAAA;AAClD,MAAMC,4BAA4B,GAAG,yBAAyB,CAAA;AAEzCC,IAAAA,sBAAsB,IAAAC,MAAA,GAA5B,MAAMD,sBAAsB,SAASE,SAAS,CAAC;AAI5DC,EAAAA,WAAWA,GAAG;IACZ,KAAK,CAAC,GAAGC,SAAS,CAAC,CAAA;AAACC,IAAAA,0BAAA,eAAAC,WAAA,EAAA,IAAA,CAAA,CAAA;AAAAD,IAAAA,0BAAA,yBAAAE,YAAA,EAAA,IAAA,CAAA,CAAA;IAEpBC,MAAM,CACH,CAAuDpB,qDAAAA,EAAAA,KAAK,CAACqB,IAAI,CAChE,IACF,CAAE,CAAA,YAAA,EAAc,IAAI,CAACC,IAAI,CAACC,IAAK,CAAC,CAAA,EAChCvB,KAAK,CAACwB,QAAQ,CAAC,IAAI,CAACF,IAAI,CAACC,IAAI,CAC/B,CAAC,CAAA;AACH,GAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;EACE,IAAIE,KAAKA,GAAG;IACV,IAAI;AAAEA,MAAAA,KAAK,GAAGxB,aAAAA;KAAe,GAAG,IAAI,CAACqB,IAAI,CAAA;AAEzCF,IAAAA,MAAM,CACH,CAAwDlB,sDAAAA,EAAAA,MAAM,CAACmB,IAAI,CAClE,IACF,CAAE,CAAA,YAAA,EAAcI,KAAM,CAAA,CAAC,EACvBvB,MAAM,CAACsB,QAAQ,CAACC,KAAK,CACvB,CAAC,CAAA;AAED,IAAA,OAAOA,KAAK,CAAA;AACd,GAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;EACE,IAAIC,IAAIA,GAAG;IACT,IAAI;AAAEA,MAAAA,IAAAA;KAAM,GAAG,IAAI,CAACJ,IAAI,CAAA;;AAExB;IACA,IAAII,IAAI,KAAKC,SAAS,EAAE;AACtB,MAAA,IAAI,IAAI,CAACL,IAAI,CAACC,IAAI,KAAK,SAAS,EAAE;AAChC;AACA,QAAA,OAAQ,GAAEpB,uBAAuB,CAAC,IAAI,CAACsB,KAAK,CAAE,CAAM,KAAA,CAAA,CAAA;AACtD,OAAC,MAAM;AACL;AACA,QAAA,OAAOtB,uBAAuB,CAAC,IAAI,CAACsB,KAAK,CAAC,CAAA;AAC5C,OAAA;AACA;AACF,KAAC,MAAM,IAAIC,IAAI,KAAK,KAAK,EAAE;MACzBN,MAAM,CACH,CAAwD,uDAAA,CAAA,EACzD,IAAI,CAACE,IAAI,CAACC,IAAI,KAAK,SACrB,CAAC,CAAA;AAED,MAAA,OAAO,KAAK,CAAA;AACd,KAAC,MAAM;AACL;AACA,MAAA,OAAOG,IAAI,CAAA;AACb,KAAA;AACF,GAAA;;AAEA;AACF;AACA;AACA;AACA;EACE,IAAIE,SAASA,GAAG;IACd,IAAI;AAAEA,MAAAA,SAAAA;KAAW,GAAG,IAAI,CAACN,IAAI,CAAA;AAE7B,IAAA,IAAI,OAAOM,SAAS,KAAK,UAAU,EAAE;AACnC,MAAA,OAAOA,SAAS,CAAA;AAClB,KAAC,MAAM;AACL,MAAA,OAAO,KAAK,CAAA;AACd,KAAA;AACF,GAAA;;AAEA;AACF;AACA;AACA;AACA;EACE,IAAIC,QAAQA,GAAG;AACb,IAAA,IAAI,IAAI,CAACP,IAAI,CAACC,IAAI,KAAK,SAAS,EAAE;AAChC,MAAA,OAAO,IAAI,CAAA;AACb,KAAC,MAAM;AACL,MAAA,OAAO,IAAI,CAAA;AACb,KAAA;AACF,GAAA;;AAEA;AACF;AACA;AACA;AACA;EACE,IAAIO,UAAUA,GAAG;AACf,IAAA,IAAIC,OAAO,GAAG,CAAC,WAAW,CAAC,CAAA;;AAE3B;IACAA,OAAO,CAACC,IAAI,CAAE,CAAkB,gBAAA,EAAA,IAAI,CAACV,IAAI,CAACC,IAAK,CAAA,CAAC,CAAC,CAAA;;AAEjD;IACAQ,OAAO,CAACC,IAAI,CAAE,CAAA,iBAAA,EAAmB,IAAI,CAACP,KAAM,EAAC,CAAC,CAAA;AAE9C,IAAA,OAAOM,OAAO,CAACV,IAAI,CAAC,GAAG,CAAC,CAAA;AAC1B,GAAA;EAGAY,SAASA,CAACC,OAAO,EAAE;IACjB,IAAIC,OAAO,GAAGD,OAAO,CAACE,gBAAgB,CACnC,CAAA,EAAE3B,wBAAyB,CAAA,SAAA,EAAWA,wBAAyB,CAAA,EAAA,CAClE,CAAC,CAAA;IACD,IAAI0B,OAAO,CAACE,MAAM,EAAE;MAClB,IAAI,CAACC,IAAI,GAAG,aAAa,CAAA;AAC3B,KAAA;;AAEA;AACA;AACA,IAAA,IAAIC,KAAK,GACPL,OAAO,CAACM,aAAa,CAAC9B,sBAAsB,CAAC,IAC7CwB,OAAO,CAACM,aAAa,CAAC7B,4BAA4B,CAAC,CAAA;AACrD,IAAA,IAAI4B,KAAK,EAAE;AACT,MAAA,IAAIE,OAAO,GAAGF,KAAK,CAACG,YAAY,CAAC,IAAI,CAAC,IAAIC,OAAO,CAACT,OAAO,CAAC,CAAA;AAC1DK,MAAAA,KAAK,CAACK,YAAY,CAAC,IAAI,EAAEH,OAAO,CAAC,CAAA;MACjC,IAAI,CAACI,cAAc,GAAGJ,OAAO,CAAA;AAC/B,KAAA;AACF,GAAA;AACF,CAAC,GAAAvB,WAAA,GAAA4B,yBAAA,CAAAjC,MAAA,CAAAkC,SAAA,EAAA,MAAA,EAAA,CAlIEC,OAAO,CAAA,EAAA;EAAAC,YAAA,EAAA,IAAA;EAAAC,UAAA,EAAA,IAAA;EAAAC,QAAA,EAAA,IAAA;AAAAC,EAAAA,WAAA,cAAA;AAAA,IAAA,OAAQ,OAAO,CAAA;AAAA,GAAA;AAAA,CAAAjC,CAAAA,EAAAA,YAAA,GAAA2B,yBAAA,CAAAjC,MAAA,CAAAkC,SAAA,qBACtBC,OAAO,CAAA,EAAA;EAAAC,YAAA,EAAA,IAAA;EAAAC,UAAA,EAAA,IAAA;EAAAC,QAAA,EAAA,IAAA;EAAAC,WAAA,EAAA,IAAA;AAAA,CAAAN,CAAAA,EAAAA,yBAAA,CAAAjC,MAAA,CAAAkC,SAAA,EA6GPM,WAAAA,EAAAA,CAAAA,MAAM,GAAAC,MAAA,CAAAC,wBAAA,CAAA1C,MAAA,CAAAkC,SAAA,EAAA,WAAA,CAAA,EAAAlC,MAAA,CAAAkC,SAAA,IAAAlC,MAAA,EAAA;AA/GkC2C,oBAAA,CAAAC,QAAA,EAAA7C,sBAAA,CAAA;;;;"}